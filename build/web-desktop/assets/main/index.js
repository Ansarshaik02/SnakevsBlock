System.register("chunks:///_virtual/Block.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var t,n,l,o,r,a,i,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,l=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,i=e.Label,c=e.Component},function(e){s=e.GameManager}],execute:function(){var u,h,b,p,g,f;r._RF.push({},"6e43fX5XTVEzKeKw6e1wNVb","Block",void 0);var k=a.ccclass,y=a.property;e("Block",(u=k("Block"),h=y(i),u((g=t((p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,l(t,"label",g,o(t)),l(t,"blockValue",f,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){this.label&&(this.label.string=String(Math.floor(this.blockValue)))},r.onHitBySnake=function(e){console.log("Block hit: value="+this.blockValue+", snake length="+e.segments.length),this.blockValue>e.segments.length-1?s.instance.gameOver():(e.decreaseLength(this.blockValue),s.instance.addScore(this.blockValue),this.node.destroy())},t}(c)).prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(p.prototype,"blockValue",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=p))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,t,n,r,i,o,s,l,c,u;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,s=e.Node,l=e.Label,c=e.director,u=e.Component}],execute:function(){var h,g,m,p,f,d,v,b,y,S,G,L,w,M,P,O;i._RF.push({},"178b8qb8YVCL5u5KHv0DX18","GameManager",void 0);var N=o.ccclass,R=o.property,z=e("GameState",function(e){return e[e.Menu=0]="Menu",e[e.Ready=1]="Ready",e[e.Playing=2]="Playing",e[e.GameOver=3]="GameOver",e}({}));e("GameManager",(h=N("GameManager"),g=R(s),m=R(l),p=R(l),f=R(s),d=R(s),v=R({type:String}),h(((O=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,n(a,"menuPanel",S,r(a)),n(a,"scoreLabel",G,r(a)),n(a,"finalScoreLabel",L,r(a)),n(a,"gameOverPanel",w,r(a)),n(a,"levelSpawner",M,r(a)),n(a,"restartSceneName",P,r(a)),a.state=z.Menu,a.score=0,a}t(a,e);var i=a.prototype;return i.onLoad=function(){a.instance=this,this.state=z.Menu,this.score=0,this.menuPanel&&(this.menuPanel.active=!0),this.gameOverPanel&&(this.gameOverPanel.active=!1),this.scoreLabel&&(this.scoreLabel.node.active=!1),this.updateScoreUI(),console.log("GameManager ready (state = Menu)")},i.playGame=function(){this.menuPanel&&(this.menuPanel.active=!1),this.scoreLabel&&(this.scoreLabel.node.active=!0),this.state=z.Ready,console.log("GameManager: state changed to Ready (waiting for first touch)")},i.startGame=function(){this.state===z.Ready&&(this.state=z.Playing,console.log("GameManager: Game started"))},i.addScore=function(e){this.state===z.Playing&&(this.score+=e,this.updateScoreUI(),console.log("Score +"+e+", total = "+this.score))},i.updateScoreUI=function(){this.scoreLabel&&(this.scoreLabel.string=String(this.score))},i.gameOver=function(){if(this.state!==z.GameOver){if(this.state=z.GameOver,console.log("GameManager: GAME OVER, Final Score =",this.score),this.scoreLabel&&(this.scoreLabel.node.active=!1),this.gameOverPanel&&(this.gameOverPanel.active=!0,this.finalScoreLabel&&(this.finalScoreLabel.string="Your Score: "+this.score)),this.levelSpawner){var e=this.levelSpawner.getComponent("LevelSpawner");e&&(e.enabled=!1,e.spawned&&Array.isArray(e.spawned)&&(e.spawned.forEach((function(e){e&&e.isValid&&e.destroy()})),e.spawned=[]))}var a=this.node.parent;if(a){var t=a.getChildByName("snake");t&&t.destroy()}}},i.restart=function(){console.log("GameManager: Restarting scene..."),a.instance=null,this.restartSceneName&&this.restartSceneName.length>0?c.loadScene(this.restartSceneName,(function(){var e,t=null==(e=c.getScene().getChildByName("Canvas"))?void 0:e.getChildByName("GameManager");if(t){var n=t.getComponent(a);n&&n.playGame()}})):console.warn("GameManager.restart: restartSceneName not set.")},i.onDestroy=function(){a.instance===this&&(a.instance=null)},a}(u)).instance=null,S=a((y=O).prototype,"menuPanel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=a(y.prototype,"scoreLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=a(y.prototype,"finalScoreLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=a(y.prototype,"gameOverPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=a(y.prototype,"levelSpawner",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=a(y.prototype,"restartSceneName",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"scene-002"}}),b=y))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/HeadDebug.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,o,t,c,i;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,c=e.Collider2D,i=e.Component}],execute:function(){var r;o._RF.push({},"45cb2U8+n9LVpykbjOoLDvr","HeadDebug",void 0);var a=t.ccclass;e("HeadDebug",a("HeadDebug")(r=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.start=function(){var e=this.getComponent(c);e?e.on("onBeginContact",this.onBeginContact,this):console.warn("HeadDebug: no Collider2D on head")},t.onBeginContact=function(e,n,o){console.log("HeadDebug: head collided with ->",n.node.name)},o}(i))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelSpawner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Block.ts","./PickupValue.ts","./snake.ts","./GameManager.ts"],(function(e){var t,n,a,i,o,r,s,l,h,c,p,d,u,f,v,w,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Prefab,l=e.Node,h=e.UITransform,c=e.Vec3,p=e.instantiate,d=e.Component},function(e){u=e.Block},function(e){f=e.PickupValue},function(e){v=e.Snake},function(e){w=e.GameManager,b=e.GameState}],execute:function(){var m,g,y,P,S,k,N,C,z,M,x,L,Y,T,I;o._RF.push({},"14281a600dCgoSEpEnC2lIr","LevelSpawner",void 0);var B=r.ccclass,H=r.property;e("LevelSpawner",(m=B("LevelSpawner"),g=H(s),y=H(s),P=H(l),S=H(l),k=H(s),m((z=t((C=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"blockPrefab",z,i(t)),a(t,"pickupPrefab",M,i(t)),a(t,"canvasNode",x,i(t)),a(t,"headNode",L,i(t)),a(t,"wallPrefab",Y,i(t)),a(t,"spawnInterval",T,i(t)),a(t,"downwardSpeed",I,i(t)),t.spawnTimer=0,t.spawned=[],t.topY=600,t.bottomY=-600,t}n(t,e);var o=t.prototype;return o.start=function(){if(this.canvasNode){var e=this.canvasNode.getComponent(h);e&&(this.topY=e.height/2+120,this.bottomY=-e.height/2-200)}this.spawnTimer=0},o.update=function(e){if(w.instance&&w.instance.state===b.Playing){this.spawnTimer+=e,this.spawnTimer>=this.spawnInterval&&(this.spawnTimer=0,this.spawnRow());for(var t=this.spawned.length-1;t>=0;t--){var n=this.spawned[t];n.translate(new c(0,-this.downwardSpeed*e,0)),this.headNode&&this.checkCollisionWithHead(n),n.worldPosition.y<this.bottomY&&(n.destroy(),this.spawned.splice(t,1))}}},o.spawnRow=function(){if(this.canvasNode){for(var e=this.canvasNode.getComponent(h),t=e?e.width:720,n=Math.min(t/6,160),a=-4*n/2,i=[],o=0;o<5;o++){var r=Math.random();if(r<.5&&this.blockPrefab){var s=p(this.blockPrefab);s.setParent(this.canvasNode);var l=Math.floor(15*Math.random())+1,d=s.getComponent(u);d&&(d.blockValue=l,d.label&&(d.label.string=l.toString())),s.setPosition(new c(a+o*n,this.topY,0)),this.spawned.push(s),i[o]=1}else if(r<.65&&this.pickupPrefab){var v=p(this.pickupPrefab);v.setParent(this.canvasNode);var w=Math.floor(5*Math.random())+1,b=v.getComponent(f);b&&(b.value=w,b.valueLabel&&(b.valueLabel.string=w.toString())),v.setPosition(new c(a+o*n,this.topY,0)),this.spawned.push(v),i[o]=2}else i[o]=0}if(this.wallPrefab)for(var m=0;m<5;m++)if(0===i[m]){var g=m>0&&1===i[m-1],y=m<4&&1===i[m+1];if(g&&y){var P=p(this.wallPrefab);P.setParent(this.canvasNode),P.setPosition(new c(a+m*n,this.topY,0)),this.spawned.push(P)}}}},o.checkCollisionWithHead=function(e){if(this.headNode){var t=this.headNode.worldPosition,n=e.worldPosition,a=t.x-n.x,i=t.y-n.y,o=a*a+i*i,r=24;try{var s=this.headNode.getComponent&&this.headNode.getComponent("cc.CircleCollider2D");s&&s.radius&&(r=s.radius)}catch(e){}var l=e.getComponent(f);if(l){if(o<=(r+16)*(r+16)){var p=this.findSnake();if(p){var d=Math.max(1,Math.floor(l.value));console.log("Pickup collected:",d),p.addSegments(d)}this.removeSpawned(e)}}else{var v=e.getComponent(u);if(v){var b=28;try{var m=e.getComponent(h);m&&m.contentSize&&(b=Math.max(m.contentSize.width,m.contentSize.height)/2)}catch(e){}if(o<=(r+b)*(r+b)){var g=this.findSnake();if(g)if("function"==typeof v.onHitBySnake)v.onHitBySnake(g);else{var y=Math.floor(v.blockValue||0);y>g.segments.length?w.instance&&w.instance.gameOver():(g.decreaseLength(y),w.instance&&w.instance.addScore(y))}this.removeSpawned(e)}}else{if(e.getComponent&&e.getComponent("Wall")||e.name&&e.name.toLowerCase().indexOf("wall")>=0){var P=10,S=40;try{var k=e.getComponent(h);k&&k.contentSize&&(P=k.contentSize.width/2,S=k.contentSize.height/2)}catch(e){}var N=Math.abs(a)<=P+r,C=Math.abs(i)<=S+r;if(N&&C){var z;z=t.x<n.x?n.x-(P+r+6):n.x+(P+r+6),this.headNode.setWorldPosition(new c(z,t.y,t.z));var M=this.findSnake();if(M&&this.canvasNode){var x=z-this.canvasNode.worldPosition.x;try{M.targetX=x}catch(e){}try{var L=M.positions;if(Array.isArray(L)){for(var Y=0;Y<8;Y++)L.unshift(this.headNode.worldPosition.clone());L.length>2e3&&(L.length=2e3)}}catch(e){}}}}else;}}}},o.removeSpawned=function(e){e.destroy();var t=this.spawned.indexOf(e);t>=0&&this.spawned.splice(t,1)},o.findSnake=function(){if(!this.headNode)return null;var e=this.headNode.getComponent(v);return e||(this.headNode.parent&&(e=this.headNode.parent.getComponent(v))?e:null)},t}(d)).prototype,"blockPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(C.prototype,"pickupPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(C.prototype,"canvasNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"headNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(C.prototype,"wallPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(C.prototype,"spawnInterval",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),I=t(C.prototype,"downwardSpeed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),N=C))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Block.ts","./GameManager.ts","./HeadDebug.ts","./LevelSpawner.ts","./NewComponent.ts","./Pickup.ts","./PickupValue.ts","./Wall.ts","./snake.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NewComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.Component}],execute:function(){var c;e._RF.push({},"ae4b8KCb7FDZazrnjQNr/7U","NewComponent",void 0);var u=o.ccclass;o.property,n("NewComponent",u("NewComponent")(c=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){},o.update=function(n){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Pickup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(c){var t,n,e,u;return{setters:[function(c){t=c.inheritsLoose},function(c){n=c.cclegacy,e=c._decorator,u=c.Component}],execute:function(){var i;n._RF.push({},"f0d88OcwEJD4pAK0gFt2MwG","Pickup",void 0);var r=e.ccclass;c("Pickup",r("Pickup")(i=function(c){function n(){return c.apply(this,arguments)||this}return t(n,c),n}(u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/PickupValue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,a,l,n,u,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,n=e._decorator,u=e.Label,o=e.Component}],execute:function(){var c,p,s,f,b,v;l._RF.push({},"6b68eed+wZOapxF/rxDLlAc","PickupValue",void 0);var h=n.ccclass,y=n.property;e("PickupValue",(c=h("PickupValue"),p=y(u),c((b=t((f=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return t=e.call.apply(e,[this].concat(l))||this,i(t,"valueLabel",b,a(t)),i(t,"value",v,a(t)),t}return r(t,e),t.prototype.start=function(){this.valueLabel&&(this.valueLabel.string=String(Math.floor(this.value)))},t}(o)).prototype,"valueLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(f.prototype,"value",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=f))||s));l._RF.pop()}}}));

System.register("chunks:///_virtual/snake.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){var e,n,i,s,o,a,r,h,l,c,g,u,p,f,d,v,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,r=t.Node,h=t.Prefab,l=t.Label,c=t.Vec3,g=t.UITransform,u=t.input,p=t.Input,f=t.instantiate,d=t.Component},function(t){v=t.GameManager,m=t.GameState}],execute:function(){var y,b,P,M,L,S,w,T,x,_,E;o._RF.push({},"8b553vqJzlLWqmY/M7aCJGU","snake",void 0);var O=a.ccclass,U=a.property;t("Snake",(y=O("Snake"),b=U(r),P=U(h),M=U(l),L=U(r),y((T=e((w=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"head",T,s(e)),i(e,"segmentPrefab",x,s(e)),i(e,"lengthLabel",_,s(e)),i(e,"canvasNode",E,s(e)),e.segments=[],e.positions=[],e.spacing=36,e.targetPos=new c(0,0,0),e.headSmooth=12,e._localPlaying=!1,e}n(e,t);var o=e.prototype;return o.start=function(){if(this.segments=[],this.head){var t=-220;if(this.canvasNode){var e=this.canvasNode.getComponent(g);e&&(t=-e.height/2+120)}this.head.setPosition(new c(0,t,0)),this.targetPos.set(0,t,0),this.segments.push(this.head);for(var n=0;n<300;n++)this.positions.push(this.head.worldPosition.clone());this.updateLengthLabel(),u.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(p.EventType.MOUSE_MOVE,this.onMouseMove,this)}else console.warn("Snake: head not assigned!")},o.update=function(t){if(v.instance&&v.instance.state===m.Playing){var e=this.head.position.clone();e.x+=(this.targetPos.x-e.x)*Math.min(1,this.headSmooth*t),e.y+=(this.targetPos.y-e.y)*Math.min(1,this.headSmooth*t),this.head.setPosition(e),this.positions.unshift(this.head.worldPosition.clone()),this.positions.length>2e3&&this.positions.pop();for(var n=1;n<this.segments.length;n++){var i=this.spacing*n,s=this.getPositionAtDistance(i);s&&this.segments[n].setWorldPosition(s)}this.updateLengthLabel()}},o.addSegments=function(t){if(this.segmentPrefab){for(var e=0;e<t;e++){var n=f(this.segmentPrefab);this.node.addChild(n);var i=this.segments[this.segments.length-1].worldPosition.clone();n.setWorldPosition(i),this.segments.push(n);for(var s=0;s<30;s++)this.positions.push(i.clone())}this.updateLengthLabel()}else console.warn("segmentPrefab not assigned")},o.decreaseLength=function(t){for(var e=0;e<t;e++){if(!(this.segments.length>1)){v.instance?v.instance.gameOver():this._localPlaying=!1;break}this.segments.pop().destroy()}this.updateLengthLabel()},o.updateLengthLabel=function(){this.lengthLabel&&(this.lengthLabel.string=String(this.segments.length))},o.onDestroy=function(){u.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(p.EventType.MOUSE_MOVE,this.onMouseMove,this)},o.updateTargetFromScreen=function(t,e){if(this.canvasNode){var n=this.canvasNode.getComponent(g);if(n){var i=t-n.width/2,s=e-n.height/2;this.targetPos.set(i,s,0)}}},o.onTouchMove=function(t){v.instance&&v.instance.state===m.Ready?v.instance.startGame():v.instance||(this._localPlaying=!0);var e=t.getUILocation();this.updateTargetFromScreen(e.x,e.y)},o.onMouseMove=function(t){var e=t.getUILocation();this.updateTargetFromScreen(e.x,e.y)},o.getPositionAtDistance=function(t){if(this.positions.length<2)return null;for(var e=0,n=0;n<this.positions.length-1;n++){var i=this.positions[n],s=this.positions[n+1],o=i.x-s.x,a=i.y-s.y,r=Math.sqrt(o*o+a*a);if(e+r>=t){var h=(t-e)/r,l=i.x+(s.x-i.x)*h,g=i.y+(s.y-i.y)*h;return new c(l,g,0)}e+=r}return this.positions[this.positions.length-1].clone()},e}(d)).prototype,"head",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(w.prototype,"segmentPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(w.prototype,"lengthLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(w.prototype,"canvasNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=w))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/Wall.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var c;r._RF.push({},"f7567ypU9tKW4HnuwTBgTTD","Wall",void 0);var u=e.ccclass;e.property,t("wall",u("wall")(c=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){},e.update=function(t){},r}(o))||c);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});